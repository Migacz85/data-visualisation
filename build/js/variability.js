"use strict";var width=340,height=280,marginBottom=50,chartColor="rgb(66, 170, 143)",font="Didact Gothic",fontSize="12",bgcolor="white",loading=0;
"use strict";navigator.onLine||alert("This website need to be connected to internet in order to work properly");
"use strict";function drawCharts(t){drawPriceChart(setDate(t,"ether"),"#ether",width,height,"€"),drawPriceChart(setDate(t,"bitcoin"),"#bitcoin",width,height,"$"),drawPriceChart(setDate(t,"litecoin"),"#litecoin",width,height,"€"),drawVarPriceChart(setDate(t,"ether"),"#ether-var",width,height,"€"),drawVarPriceChart(setDate(t,"bitcoin"),"#bitcoin-var",width,height,"$"),drawVarPriceChart(setDate(t,"litecoin"),"#litecoin-var",width,height,"€")}
"use strict";function drawPriceChart(t,e,n,r,a){queue().defer(d3.csv,t).await(function(t,i){loading+=1,progress(loading),t&&console.log(t);var o=e.substr(1);o.toString(),document.getElementById(o).innerHTML="<p>".concat(i[0].High," ").concat(a," </p>");var c=d3.max(i,function(t){return+t.High}),l=d3.min(i,function(t){return+t.High}),s=d3.min(i,function(t){return t.Date}),d=d3.max(i,function(t){return t.Date}),u=d3.time.scale().domain([new Date(s),new Date(d)]).range([10,n-41]),g=d3.svg.axis().scale(u),f=d3.scale.linear().domain([0,c-l]).range([0,r-10-marginBottom]);if(h){var m=h.select(e);m.exit().remove()}var h=d3.select(e).append("svg").attr("width",n).attr("height",r).style("background-color",bgcolor).append("g");d3.transition().duration(4500);h.selectAll("rect").data(i).enter().append("rect").attr("x",function(t,e){return n-n/i.length-e*((n-50)/i.length)}).attr("y",function(t){return r-marginBottom-f(t.High-l)}).attr("height",function(t){return f(t.High-l)}).attr("width",function(t){return n/i.length}).style("fill","white").append("svg:title").text(function(t){return"Date: ".concat(t.Date," Price: ").concat(t.High)}).append("g"),h.selectAll("rect").transition().duration(1500).style("fill",chartColor),h.selectAll("text").data(i).enter().append("text").text(function(t,e){return parseInt(l+.1*e*(c-l))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,e){return r-marginBottom-fontSize+parseInt(fontSize)-e*((r-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var p=r-marginBottom;return h.append("g").attr("class","x axis").attr("transform","translate(40,".concat(p,")")).call(g).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start"),"loaded"})}
"use strict";function drawVarPriceChart(t,n,e,a,r){queue().defer(d3.csv,t).await(function(t,i){loading+=1,progress(loading),t&&console.log(t);var o=n.substr(1);o.toString(),document.getElementById(o).innerHTML="<p>".concat(i[0].Open," ").concat(r," </p>");var c=d3.max(i,function(t){return+t.High-t.Low}).toFixed(1),l=d3.min(i,function(t){return+t.High-t.Low}),s=d3.mean(i,function(t){return+t.High-t.Low}).toFixed(1),u=d3.min(i,function(t){return t.Date}),g=d3.max(i,function(t){return t.Date});document.getElementById("".concat(o,"-stat")).innerHTML='\n      <li class="list-group-item">Dates:</li>\n      <li class="list-group-item">'.concat(u," to ").concat(g,'</li>\n      <li class="list-group-item">Maximal change in price per day: </li>\n      <li class="list-group-item"> ').concat(c," ").concat(r,'</li>\n      <li class="list-group-item">Minimal change in price per day: </li>\n      <li class="list-group-item"> ').concat(l.toFixed(1)," ").concat(r,'</li>\n      <li class="list-group-item">Average Variability in Price:</li>\n      <li class="list-group-item"> ').concat(s," ").concat(r,"</li>\n      "),document.getElementById(o).innerHTML=" <p> Max: ".concat(c," Average: ").concat(s," ").concat(r," </p>");var d=d3.time.scale().domain([new Date(u),new Date(g)]).range([10,e-41]),m=d3.svg.axis().scale(d),f=d3.scale.linear().domain([0,c-l]).range([0,a-10-marginBottom]),p=d3.select(n).append("svg").attr("width",e).attr("height",a).style("background-color",bgcolor);p.selectAll("rect").data(i).enter().append("rect").attr("x",function(t,n){return e-e/i.length-n*((e-50)/i.length)}).attr("y",function(t){return a-marginBottom-f(t.High-t.Low)}).attr("height",function(t){return f(t.High-t.Low)}).attr("width",function(t){return e/i.length}).style("fill","white"),p.selectAll("rect").transition().duration(1500).style("fill",chartColor).transition().duration(3e3).style("fill",function(t){return t.High-t.Low>s?"orange":chartColor}),p.selectAll("text").data(i).enter().append("text").text(function(t,n){return parseInt(l+.1*n*(c-l))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,n){return a-marginBottom-n*((a-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var h=a-marginBottom;p.append("g").attr("class","x axis").attr("transform","translate(40,".concat(h,")")).call(m).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start")})}
"use strict";function progress(e){return document.getElementById("progress").innerHTML="Loading data: ".concat((e/6*100).toFixed(0),"%"),document.getElementById("progress").style.width="".concat(e/6*100,"%"),6===e||0===e?(document.getElementById("progress-bar").style.display="none",document.getElementById("wrapper").style.display="block",document.getElementById("loader").style.display="none",document.getElementById("footer").style.display="block","loaded"):(document.getElementById("progress-bar").style.display="block",document.getElementById("wrapper").style.display="none",document.getElementById("loader").style.display="block",document.getElementById("footer").style.display="none","loading")}
"use strict";function drawChartsSelectMonths(a){6==loading&&(loading=0,drawCharts(setDateScope(a)))}function alldata(){6==loading&&(loading=0,drawCharts("2017-07-01"))}
"use strict";function setDateScope(t){var a=new Date;return a.setMonth(a.getMonth()-t),a.toISOString().slice(0,10)}function setDate(t,a){var e="&start_date=".concat(t),n="https://www.quandl.com/api/v3/datasets/BITSTAMP/USD.csv?api_key=fzanZC3297Jsid-E8vCF".concat(e),s="https://www.quandl.com/api/v3/datasets/GDAX/ETH_EUR.csv?api_key=fzanZC3297Jsid-E8vCF".concat(e),c="https://www.quandl.com/api/v3/datasets/GDAX/LTC_EUR.csv?api_key=fzanZC3297Jsid-E8vCF".concat(e);return"bitcoin"===a?n:"ether"===a?s:"litecoin"===a?c:void 0}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LXNldHRpbmdzLWFuZC1kYXRhLmpzIiwiZHJhdy1jaGFydC5qcyIsImZ1bmN0aW9ucy9kcmF3Q2hhcnRzLmpzIiwiZnVuY3Rpb25zL2RyYXdQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL2RyYXdWYXJQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL3Byb2dyZXNzLmpzIiwiZnVuY3Rpb25zL3JhZGlvYnV0dG9ucy5qcyIsImZ1bmN0aW9ucy9zZXREYXRlLmpzIl0sIm5hbWVzIjpbIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luQm90dG9tIiwiY2hhcnRDb2xvciIsImZvbnQiLCJmb250U2l6ZSIsImJnY29sb3IiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJhbGVydCIsImRyYXdDaGFydHMiLCJkYXRlIiwiZHJhd1ByaWNlQ2hhcnQiLCJzZXREYXRlIiwiZHJhd1ZhclByaWNlQ2hhcnQiLCJkYXRhIiwiaWQiLCJjdXJyZW5jeSIsInF1ZXVlIiwiZGVmZXIiLCJkMyIsImNzdiIsImF3YWl0IiwiZXJyb3IiLCJ0cmFuc2FjdGlvbnNEYXRhIiwibG9hZGluZyIsInByb2dyZXNzIiwibWFrZUdyYXBocyIsImNvbnNvbGUiLCJsb2ciLCJhIiwidG9TdHJpbmciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiY29uY2F0IiwiSGlnaCIsIm1heCIsImQiLCJtaW4iLCJzdWJzdHIiLCJEYXRlIiwieCIsInNjYWxlIiwiZG9tYWluIiwiZmlyc3REYXRlIiwibGFzdERhdGUiLCJyYW5nZSIsInhBeGlzIiwic3ZnIiwiYXhpcyIsInBhdGgiLCJyZW1vdmUiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiZXhpdCIsInN0eWxlIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJpIiwibGVuZ3RoIiwidGV4dCIsInBhcnNlSW50IiwidG1wIiwiY2FsbCIsIk9wZW4iLCJMb3ciLCJ0b0ZpeGVkIiwibWVhbiIsImF2ZyIsInRpbWUiLCJsaW5lYXIiLCJkaXNwbGF5IiwiZHJhd0NoYXJ0c1NlbGVjdE1vbnRocyIsIm51bWJlck1vbnRocyIsInNldERhdGVTY29wZSIsInBlcmlvZCIsInNldE1vbnRoIiwiZ2V0TW9udGgiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwic3RhcnREYXRlIiwidHlwZSIsImJpdGNvaW5QcmljZURhdGEiLCJsaXRlY29pblByaWNlRGF0YSIsImV0aGVyUHJpY2VEYXRhIl0sIm1hcHBpbmdzIjoiYUFFQSxJQUFBQSxNQUFBLElBRU1BLE9BQU4sSUFDTUMsYUFBTixHQUNNQyxXQUFlLG9CQUNmQyxLQUFBQSxnQkFDQUMsU0FBTyxLQUNQQyxRQUFXLFFBQ1hDLFFBQVU7YUNIaEJDLFVBQUFDLFFBQ0dDLE1BQUNGO2FDUEosU0FBU0csV0FBV0MsR0FEcEJDLGVBQUFDLFFBQUFGLEVBQUEsU0FBQSxTQUFBWCxNQUFBQyxPQUFBLEtBQ0FXLGVBQVNGLFFBQVRDLEVBQTBCLFdBQUEsV0FBQVgsTUFBQUMsT0FBQSxLQUN4QlcsZUFBZUMsUUFBUUYsRUFBTSxZQUFVLFlBQXpCWCxNQUFBQyxPQUFkLEtBRUFXLGtCQUFlQyxRQUFRRixFQUFNLFNBQWEsYUFBYVgsTUFBT0MsT0FBUSxLQUV0RWEsa0JBQWtCRCxRQUFRRixFQUFNLFdBQVUsZUFBY1gsTUFBT0MsT0FBL0QsS0FDQWEsa0JBQWtCRCxRQUFRRixFQUFNLFlBQVksZ0JBQWdCWCxNQUFPQyxPQUFRO2FDSjdFLFNBQVNXLGVBQWVHLEVBQU1DLEVBQUloQixFQUFPQyxFQUFRZ0IsR0FGakRDLFFBQUFDLE1BQUFDLEdBQUFDLElBQUFOLEdBQUFPLE1BR0VKLFNBQUFLLEVBQUFDLEdBR0VDLFNBQVcsRUFEYkMsU0FBU0MsU0FDUEYsR0FBQUcsUUFBQUMsSUFBQU4sR0FDQUcsSUFBQUEsRUFBU0QsRUFBQUEsT0FBVCxHQUdBSyxFQUFFQyxXQUZGQyxTQUFBQyxlQUFXSCxHQUFBSSxVQUFYLE1BQUFDLE9BQVdYLEVBQUEsR0FBQVksS0FBWCxLQUFBRCxPQUFX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QSxFQUNBZixXQUFTa0UsYUFBQUEsS0FHTGxFLFNBQUFBLFVBQ0QsR0FBQWUsVUFDRkEsUUFBQSxFQUtHZixXQUFXO2FDWmYsU0FBQW9FLGFBQUFDLEdBRUEsSUFBQXpDLEVBQVN3QyxJQUFBQSxLQUlQLE9BREF4QyxFQUFFMEMsU0FBUzFDLEVBQUUyQyxXQUFhRixHQUNuQnpDLEVBQUU0QyxjQUFjQyxNQUFNLEVBQUcsSUFLaEMsU0FBTUMsUUFBU3pFLEVBQUEwRSxHQUVmLElBQU1DLEVBQUFBLGVBQUFBLE9BQWdCM0UsR0FFaEI0RSxFQUFpQix1RkFBQXBELE9BQUFpRCxHQUVuQkMsRUFBUyx1RkFBQWxELE9BQVdpRCxHQUNwQkMsRUFBa0IsdUZBQUFsRCxPQUFBaUQsR0FFdkIsTUFBQSxZQUFBQyxFQUFBQyxFQUZjLFVBQVRELEVBQXlCRyxFQUNoQixhQUFUSCxFQUE0QkUsT0FBaEMiLCJmaWxlIjoidmFyaWFiaWxpdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAgKi9cbi8vIFRoaXMgamF2YXNjcmlwdCBmaWxlIGlzIGxvYWRlZCBmaXJzdC5cbi8vIENoYXJ0cyBjb25maWdcblxuY29uc3Qgd2lkdGggPSAzNDA7XG5jb25zdCBoZWlnaHQgPSAyODA7XG5jb25zdCBtYXJnaW5Cb3R0b20gPSA1MDtcbmNvbnN0IGNoYXJ0Q29sb3IgPSAncmdiKDY2LCAxNzAsIDE0MyknO1xuY29uc3QgZm9udCA9ICdEaWRhY3QgR290aGljJztcbmNvbnN0IGZvbnRTaXplID0gJzEyJztcbmNvbnN0IGJnY29sb3IgPSAnd2hpdGUnO1xuY29uc3QgbG9hZGluZyA9IDA7XG4iLCIvLyBUaGlzIGphdmFzY3JpcHQgZmlsZSBpcyBsYXN0LlxuLy8gSW5pdGlhbGl6YXRpb24gZnVuY3Rpb25zIG9uIHBhZ2Ugc3RhcnQuXG5cbi8vIFdoZW4gcGFnZSBpcyBsb2FkaW5nIGZpcnN0IHRpbWUgbG9hZCBwcmVzZXQgd2l0aCBhbGwgZGF0YSBmb3IgY2hhcnRzLlxuLyogZXNsaW50IG5vLXVuZGVmOiAwICovXG4vLyBkcmF3Q2hhcnRzKCcyMDE3LTA3LTAxJyk7IDwtIG1vdmUgdGhpcyB0byBsb2FkIGZyb20gaHRtbFxuXG4vLyBDaGVjayBpZiB0aGUgYnJvd3NlciBpcyBvZmZsaW5lXG5pZighbmF2aWdhdG9yLm9uTGluZSkge1xuICAgIGFsZXJ0KCdUaGlzIHdlYnNpdGUgbmVlZCB0byBiZSBjb25uZWN0ZWQgdG8gaW50ZXJuZXQgaW4gb3JkZXIgdG8gd29yayBwcm9wZXJseScpXG59XG4iLCIvKiBlc2xpbnQgbm8tdW5kZWY6IDAgbm8tdW51c2VkLXZhcnM6IDAgKi9cbmZ1bmN0aW9uIGRyYXdDaGFydHMoZGF0ZSkge1xuICBkcmF3UHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdldGhlcicpLCAnI2V0aGVyJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xuICBkcmF3UHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdiaXRjb2luJyksICcjYml0Y29pbicsIHdpZHRoLCBoZWlnaHQsICckJyk7XG4gIGRyYXdQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2xpdGVjb2luJyksICcjbGl0ZWNvaW4nLCB3aWR0aCwgaGVpZ2h0LCAn4oKsJyk7XG5cbiAgZHJhd1ZhclByaWNlQ2hhcnQoc2V0RGF0ZShkYXRlLCAnZXRoZXInKSwgJyNldGhlci12YXInLCB3aWR0aCwgaGVpZ2h0LCAn4oKsJyk7XG4gIGRyYXdWYXJQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2JpdGNvaW4nKSwgJyNiaXRjb2luLXZhcicsIHdpZHRoLCBoZWlnaHQsICckJyk7XG4gIGRyYXdWYXJQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2xpdGVjb2luJyksICcjbGl0ZWNvaW4tdmFyJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xufVxuIiwiLy8gVGhpcyBmdW5jdGlvbiBkcmF3IHByaWNlIGNoYXJ0XG4vKiBlc2xpbnQgbm8tdW5kZWY6IDAgbm8tdW51c2VkLXZhcnM6MCAqL1xuXG5mdW5jdGlvbiBkcmF3UHJpY2VDaGFydChkYXRhLCBpZCwgd2lkdGgsIGhlaWdodCwgY3VycmVuY3kpIHtcbiAgcXVldWUoKS5kZWZlcihkMy5jc3YsIGRhdGEpLmF3YWl0KG1ha2VHcmFwaHMpO1xuXG4gIGZ1bmN0aW9uIG1ha2VHcmFwaHMoZXJyb3IsIHRyYW5zYWN0aW9uc0RhdGEpIHtcbiAgICBsb2FkaW5nICs9IDE7XG4gICAgcHJvZ3Jlc3MobG9hZGluZyk7XG4gICAgaWYgKGVycm9yKSB7IGNvbnNvbGUubG9nKGVycm9yKTsgfVxuICAgIGNvbnN0IGEgPSBpZC5zdWJzdHIoMSk7XG4gICAgYS50b1N0cmluZygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGA8cD4ke3RyYW5zYWN0aW9uc0RhdGFbMF0uSGlnaH0gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IG1heCA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIGNvbnN0IG1pbiA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIGNvbnN0IGZpcnN0RGF0ZSA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG4gICAgY29uc3QgbGFzdERhdGUgPSBkMy5tYXgodHJhbnNhY3Rpb25zRGF0YSwgZCA9PiBkLkRhdGUpO1xuXG4gICAgY29uc3QgeCA9IGQzLnRpbWUuc2NhbGUoKVxuICAgICAgLmRvbWFpbihbbmV3IERhdGUoZmlyc3REYXRlKSwgbmV3IERhdGUobGFzdERhdGUpXSlcbiAgICAgIC5yYW5nZShbMTAsIHdpZHRoIC0gNDFdKTsgLy8gTGVmdCByaWdodCBwb3NpdGlvbiBmb3IgZGF0ZSBjaGFydFxuXG4gICAgY29uc3QgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAuc2NhbGUoeCk7XG5cblxuICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oWzAsIG1heCAtIG1pbl0pIC8vIEJvdW5kYXJpZXMgZm9yIGNoYXJ0XG4gICAgICAucmFuZ2UoWzAsIGhlaWdodCAtIDEwIC0gbWFyZ2luQm90dG9tXSk7IC8vIGJvdW5kYXJpZXMgZm9yIGRhdGFcblxuICAgIGlmIChzdmcpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBzdmcuc2VsZWN0KGlkKTtcbiAgICAgIHBhdGguZXhpdCgpLnJlbW92ZSgpO1xuICAgIH1cbiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoaWQpXG4gICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgYmdjb2xvcilcbiAgICAgIC8vIC5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS5vbihcInpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gICBjb25zb2xlLmxvZyhkMy5ldmVudC50cmFuc2xhdGUpXG4gICAgICAvLyAgIHN2Zy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIgKyBcIiBzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpXG4gICAgICAvLyB9KSlcbiAgICAgIC5hcHBlbmQoJ2cnKTtcbiAgICBjb25zdCB0ID0gZDNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbig0NTAwKTtcblxuICAgIC8vIEJhcnNcbiAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgIC5kYXRhKHRyYW5zYWN0aW9uc0RhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgncmVjdCcpIC8vIGFwcGVuZCBzdmcgdG8gZGl2XG5cbiAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+IHdpZHRoIC0gd2lkdGggLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aCAtIChpICogKCh3aWR0aCAtIDUwKSAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKSkpXG4gICAgICAuYXR0cigneScsIGQgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gc2NhbGUoZC5IaWdoIC0gbWluKSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBkID0+IHNjYWxlKGQuSGlnaCAtIG1pbikpXG4gICAgICAuYXR0cignd2lkdGgnLCBkID0+IHdpZHRoIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGgpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAnd2hpdGUnKVxuICAgICAgLmFwcGVuZCgnc3ZnOnRpdGxlJylcbiAgICAgIC50ZXh0KGQgPT4gYERhdGU6ICR7ZC5EYXRlfSBQcmljZTogJHtkLkhpZ2h9YClcblxuICAgICAgLmFwcGVuZCgnZycpO1xuXG5cbiAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbigxNTAwKVxuICAgICAgLnN0eWxlKCdmaWxsJywgY2hhcnRDb2xvcik7XG5cblxuICAgIC8vIFByaWNlXG4gICAgc3ZnLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuZGF0YSh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLnRleHQoKGQsIGkpID0+IHBhcnNlSW50KG1pbiArICgobWF4IC0gbWluKSAqIChpICogMC4xKSkpKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuYXR0cigneCcsICgpID0+IDIwKVxuICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gZm9udFNpemUgKyBwYXJzZUludChmb250U2l6ZSkgLSAoaSAqICgoaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gZm9udFNpemUpIC8gMTApKSlcbiAgICAgIC5hdHRyKCdmb250LWZhbWlseScsIGZvbnQpXG4gICAgICAuYXR0cignZm9udC1zaXplJywgZm9udFNpemUpXG4gICAgICAuYXR0cignZmlsbCcsICdibGFjaycpO1xuXG4gICAgLy8gRGF0ZVxuICAgIGNvbnN0IHRtcCA9IGhlaWdodCAtIG1hcmdpbkJvdHRvbTtcblxuICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSg0MCwke3RtcH0pYClcbiAgICAgIC5jYWxsKHhBeGlzKVxuICAgICAgLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuYXR0cigneScsIDApXG4gICAgICAuYXR0cigneCcsIDkpXG4gICAgICAuYXR0cignZHknLCAnLjM1ZW0nKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoOTApJylcbiAgICAgIC5hdHRyKCdmb250LXNpemUnLCBmb250U2l6ZSlcbiAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnc3RhcnQnKTtcbiAgICAgIHJldHVybiBcImxvYWRlZFwiXG4gIH1cblxuIFxufVxuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiAwIG5vLXVuZGVmOiAwICovXG4vLyBEcmF3IHByaWNlIGNoYXJ0XG5cbmZ1bmN0aW9uIGRyYXdWYXJQcmljZUNoYXJ0KGRhdGEsIGlkLCB3aWR0aCwgaGVpZ2h0LCBjdXJyZW5jeSkge1xuICBmdW5jdGlvbiBtYWtlR3JhcGhzKGVycm9yLCB0cmFuc2FjdGlvbnNEYXRhKSB7XG4gICAgbG9hZGluZyArPSAxO1xuICAgIHByb2dyZXNzKGxvYWRpbmcpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpZC5zdWJzdHIoMSk7XG4gICAgYS50b1N0cmluZygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGA8cD4ke3RyYW5zYWN0aW9uc0RhdGFbMF0uT3Blbn0gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IG1heCA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2ggLSBkLkxvdykudG9GaXhlZCgxKTtcbiAgICBjb25zdCBtaW4gPSBkMy5taW4odHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpO1xuICAgIGNvbnN0IGF2ZyA9IGQzLm1lYW4odHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpLnRvRml4ZWQoMSk7XG4gICAgY29uc3QgZmlyc3REYXRlID0gZDMubWluKHRyYW5zYWN0aW9uc0RhdGEsIGQgPT4gZC5EYXRlKTtcbiAgICBjb25zdCBsYXN0RGF0ZSA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG5cbiAgICAvLyBQcmludCBzdGF0c1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7YX0tc3RhdGApLmlubmVySFRNTCA9IGBcbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPkRhdGVzOjwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj4ke2ZpcnN0RGF0ZX0gdG8gJHtsYXN0RGF0ZX08L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+TWF4aW1hbCBjaGFuZ2UgaW4gcHJpY2UgcGVyIGRheTogPC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPiAke21heH0gJHtjdXJyZW5jeX08L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+TWluaW1hbCBjaGFuZ2UgaW4gcHJpY2UgcGVyIGRheTogPC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPiAke21pbi50b0ZpeGVkKDEpfSAke2N1cnJlbmN5fTwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj5BdmVyYWdlIFZhcmlhYmlsaXR5IGluIFByaWNlOjwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj4gJHthdmd9ICR7Y3VycmVuY3l9PC9saT5cbiAgICAgIGA7XG5cblxuICAgIC8vIG1pbiA9IG1pbi50b0ZpeGVkKDApO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGAgPHA+IE1heDogJHttYXh9IEF2ZXJhZ2U6ICR7YXZnfSAke2N1cnJlbmN5fSA8L3A+YDtcblxuXG4gICAgY29uc3QgeCA9IGQzLnRpbWUuc2NhbGUoKVxuICAgICAgLmRvbWFpbihbbmV3IERhdGUoZmlyc3REYXRlKSwgbmV3IERhdGUobGFzdERhdGUpXSlcbiAgICAgIC5yYW5nZShbMTAsIHdpZHRoIC0gNDFdKTsgLy8gTGVmdCByaWdodCBwb3NpdGlvbiBmb3IgZGF0ZSBjaGFydFxuXG4gICAgY29uc3QgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAuc2NhbGUoeCk7XG5cblxuICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oWzAsIG1heCAtIG1pbl0pIC8vIEJvdW5kYXJpZXMgZm9yIGNoYXJ0XG4gICAgICAucmFuZ2UoWzAsIGhlaWdodCAtIDEwIC0gbWFyZ2luQm90dG9tXSk7IC8vIGJvdW5kYXJpZXMgZm9yIGRhdGFcblxuICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdChpZClcbiAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCBiZ2NvbG9yKTtcblxuXG4gICAgc3ZnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAuZGF0YSh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3JlY3QnKSAvLyBhcHBlbmQgc3ZnIHRvIGRpdlxuICAgICAgLmF0dHIoJ3gnLCAoZCwgaSkgPT4gd2lkdGggLSB3aWR0aCAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoIC0gKGkgKiAoKHdpZHRoIC0gNTApIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGgpKSlcbiAgICAgIC5hdHRyKCd5JywgZCA9PiBoZWlnaHQgLSBtYXJnaW5Cb3R0b20gLSBzY2FsZShkLkhpZ2ggLSBkLkxvdykpXG4gICAgICAuYXR0cignaGVpZ2h0JywgZCA9PiBzY2FsZShkLkhpZ2ggLSBkLkxvdykpXG4gICAgICAuYXR0cignd2lkdGgnLCBkID0+IHdpZHRoIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGgpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAnd2hpdGUnKTtcblxuXG4gICAgc3ZnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMTUwMClcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGNoYXJ0Q29sb3IpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMzAwMClcbiAgICAgIC5zdHlsZSgnZmlsbCcsIChkKSA9PiB7XG4gICAgICAgIGlmIChkLkhpZ2ggLSBkLkxvdyA+IGF2ZykgeyAvLyBUaHJlc2hvbGQgb2YgMTVcbiAgICAgICAgICByZXR1cm4gJ29yYW5nZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXJ0Q29sb3I7XG4gICAgICB9KTtcblxuICAgIC8vIFByaWNlXG4gICAgc3ZnLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuZGF0YSh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLnRleHQoKGQsIGkpID0+IHBhcnNlSW50KG1pbiArICgobWF4IC0gbWluKSAqIChpICogMC4xKSkpKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuYXR0cigneCcsICgpID0+IDIwKVxuICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gKGkgKiAoKGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIGZvbnRTaXplKSAvIDEwKSkpXG4gICAgICAuYXR0cignZm9udC1mYW1pbHknLCBmb250KVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKTtcblxuICAgIC8vIERhdGVcbiAgICBjb25zdCB0bXAgPSBoZWlnaHQgLSBtYXJnaW5Cb3R0b207XG5cbiAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd4IGF4aXMnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoNDAsJHt0bXB9KWApXG4gICAgICAuY2FsbCh4QXhpcylcbiAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgLmF0dHIoJ3knLCAwKVxuICAgICAgLmF0dHIoJ3gnLCA5KVxuICAgICAgLmF0dHIoJ2R5JywgJy4zNWVtJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAncm90YXRlKDkwKScpXG4gICAgICAuYXR0cignZm9udC1zaXplJywgZm9udFNpemUpXG4gICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ3N0YXJ0Jyk7XG4gIH1cblxuICBxdWV1ZSgpXG4gICAgLmRlZmVyKGQzLmNzdiwgZGF0YSlcbiAgICAuYXdhaXQobWFrZUdyYXBocyk7XG59XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAgKi9cbi8vIFRoaXMgZnVuY3Rpb24gc2hvd3MgbG9hZGluZyBiYXIgd2hlbiBkYXRhIGlzIGxvYWRpbmcuXG5mdW5jdGlvbiBwcm9ncmVzcyhsb2FkaW5nKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcycpLmlubmVySFRNTCA9IGBMb2FkaW5nIGRhdGE6ICR7KGxvYWRpbmcgLyA2ICogMTAwKS50b0ZpeGVkKDApfSVgO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MnKS5zdHlsZS53aWR0aCA9IGAkeyhsb2FkaW5nIC8gNikgKiAxMDB9JWA7XG4gIGlmIChsb2FkaW5nID09PSA2IHx8IGxvYWRpbmcgPT09IDApIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb290ZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICByZXR1cm4gJ2xvYWRlZCc7XG4gIH1cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLWJhcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvb3RlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgcmV0dXJuICdsb2FkaW5nJztcbn1cbiIsIi8vIFVzZXIgaW5wdXRzIGZyb20gcmFkaW9idXRvbnNcbi8qIGVzbGludCBuby11bmRlZjogIDAgKi9cbmZ1bmN0aW9uIGRyYXdDaGFydHNTZWxlY3RNb250aHMobnVtYmVyTW9udGhzKSB7XG4gIGlmIChsb2FkaW5nID09IDYpIHsgLy8gcHJldmVudCBzdGFydGluZyB0aGlzIGZ1bmN0aW9ucyB3aGlsZSB1c2VyIGlzIGNsaWNraW5nIG9uIHJhZGlvIGJ1dHRvbnMgdG8gZmFzdFxuICAgIGxvYWRpbmcgPSAwO1xuICAgIGRyYXdDaGFydHMoc2V0RGF0ZVNjb3BlKG51bWJlck1vbnRocykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFsbGRhdGEoKSB7XG4gIGlmIChsb2FkaW5nID09IDYpIHtcbiAgICBsb2FkaW5nID0gMDtcbiAgICBkcmF3Q2hhcnRzKCcyMDE3LTA3LTAxJyk7XG4gIH1cbn1cbiIsIi8qIGVzbGludCBuby11bnVzZWQtdmFyczogMCAqL1xuXG5mdW5jdGlvbiBzZXREYXRlU2NvcGUocGVyaW9kKSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xuXG4gIGQuc2V0TW9udGgoZC5nZXRNb250aCgpIC0gcGVyaW9kKTtcbiAgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG59XG5cblxuZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0eXBlKSB7XG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IGAmc3RhcnRfZGF0ZT0ke2RhdGV9YDtcblxuICBjb25zdCBiaXRjb2luUHJpY2VEYXRhID0gYGh0dHBzOi8vd3d3LnF1YW5kbC5jb20vYXBpL3YzL2RhdGFzZXRzL0JJVFNUQU1QL1VTRC5jc3Y/YXBpX2tleT1memFuWkMzMjk3SnNpZC1FOHZDRiR7c3RhcnREYXRlfWA7XG4gIGNvbnN0IGV0aGVyUHJpY2VEYXRhID0gYGh0dHBzOi8vd3d3LnF1YW5kbC5jb20vYXBpL3YzL2RhdGFzZXRzL0dEQVgvRVRIX0VVUi5jc3Y/YXBpX2tleT1memFuWkMzMjk3SnNpZC1FOHZDRiR7c3RhcnREYXRlfWA7XG4gIGNvbnN0IGxpdGVjb2luUHJpY2VEYXRhID0gYGh0dHBzOi8vd3d3LnF1YW5kbC5jb20vYXBpL3YzL2RhdGFzZXRzL0dEQVgvTFRDX0VVUi5jc3Y/YXBpX2tleT1memFuWkMzMjk3SnNpZC1FOHZDRiR7c3RhcnREYXRlfWA7XG5cbiAgaWYgKHR5cGUgPT09ICdiaXRjb2luJykgcmV0dXJuIGJpdGNvaW5QcmljZURhdGE7XG4gIGlmICh0eXBlID09PSAnZXRoZXInKSByZXR1cm4gZXRoZXJQcmljZURhdGE7XG4gIGlmICh0eXBlID09PSAnbGl0ZWNvaW4nKSByZXR1cm4gbGl0ZWNvaW5QcmljZURhdGE7XG59XG4iXX0=
